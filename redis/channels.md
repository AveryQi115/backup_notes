## 任务队列  
  
任务队列传输任务，一端是消费者，一段是生产者  
  
队列可以通过redis的列表类型实现  
  
`BRPOP key` 指令执行效果类似`RPOP key`但是在任务队列中没有任务时会阻塞，有任务取任务  
  
`BRPOP key1 key2 key3...` 可以通过此指令实现优先队列，在所有队列中都没有任务的时候阻塞  
  
在多个队列都有任务的时候按key1，key2...的顺序取任务  
  
## 发布/订阅模式  
  
模式中有发布者和订阅者两个角色  
  
发布者向指定频道发送信息，所有订阅此频道的订阅者收到信息  
  
发出去的消息不会被持久化，订阅者只能看到它订阅了该频道以后发给它的信息，不能看到之前的  
  
订阅者在订阅模式只能使用`SUBSCRIBE`,`PSUBSCRIBE`,`UNSUBSCRIBE`,`PUNSUBSCRIBE`指令  
  
`PUBLISH channel msg` 向channel频道发信息msg  
  
`SUBSCRIBE channel` 订阅channel频道，订阅成功后进入订阅状态，不能使用除上述四种指令之外的其他指令  
  
`UNSUBSCRIBE channel` 取消订阅channel频道，取消订阅之后返回当前订阅的频道数，为0时退出订阅状态  
  
`PSUBSCRIBE channel.?*` 使用通配符一次订阅多个频道  
  
这个指令有一点扯，如果同一个频道被多个通配符命中了，那么算是这个频道被该订阅者订阅了多次，会接受多条msg  
  
`PUNSUBSCRIBE channel` 取消通过`PSUBSCRIBE`指令订阅的频道，不能使用通配符，精准取消  
  
不能通过该指令取消`SUBSCRIBE`指令订阅的频道  
  
## 管道  
  
叫管道感觉很陌生，但是它的英文名是pipelining，熟悉吧...万恶的计算机系统结构...  
  
Redis和客户端之间使用TCP协议进行连接，一般来说，redis会等上一条指令执行并返回结果后再执行下一条指令  
  
管道技术就是将彼此之间没有依赖关系的指令通过管道一次性发送并在执行完之后一次性返回结果  
  
  
